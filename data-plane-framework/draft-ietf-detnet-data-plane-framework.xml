<?xml version="1.0" encoding="US-ASCII"?>
<!DOCTYPE rfc SYSTEM "rfc2629.dtd" [
<!ENTITY rfc2119 PUBLIC "" "http://xml2rfc.tools.ietf.org/public/rfc/bibxml/reference.RFC.2119.xml">
<!ENTITY rfc3031 PUBLIC "" "http://xml2rfc.tools.ietf.org/public/rfc/bibxml/reference.RFC.3031.xml">
<!ENTITY rfc3032 PUBLIC "" "http://xml2rfc.tools.ietf.org/public/rfc/bibxml/reference.RFC.3032.xml">
<!ENTITY rfc3985 PUBLIC "" "http://xml2rfc.tools.ietf.org/public/rfc/bibxml/reference.RFC.3985.xml">
<!ENTITY rfc4090 PUBLIC "" "http://xml2rfc.tools.ietf.org/public/rfc/bibxml/reference.RFC.4090.xml">
<!ENTITY rfc4385 PUBLIC "" "http://xml2rfc.tools.ietf.org/public/rfc/bibxml/reference.RFC.4385.xml">
<!ENTITY rfc4446 PUBLIC "" "http://xml2rfc.tools.ietf.org/public/rfc/bibxml/reference.RFC.4446.xml">
<!ENTITY rfc4447 PUBLIC "" "http://xml2rfc.tools.ietf.org/public/rfc/bibxml/reference.RFC.4447.xml">
<!ENTITY rfc4448 PUBLIC "" "http://xml2rfc.tools.ietf.org/public/rfc/bibxml/reference.RFC.4448.xml">
<!ENTITY rfc4553 PUBLIC "" "http://xml2rfc.tools.ietf.org/public/rfc/bibxml/reference.RFC.4553.xml">
<!ENTITY rfc4664 PUBLIC "" "http://xml2rfc.tools.ietf.org/public/rfc/bibxml/reference.RFC.4664.xml">
<!ENTITY rfc4817 PUBLIC "" "http://xml2rfc.tools.ietf.org/public/rfc/bibxml/reference.RFC.4817.xml">
<!ENTITY rfc4872 PUBLIC "" "http://xml2rfc.tools.ietf.org/public/rfc/bibxml/reference.RFC.4872.xml">
<!ENTITY rfc4873 PUBLIC "" "http://xml2rfc.tools.ietf.org/public/rfc/bibxml/reference.RFC.4873.xml">
<!ENTITY rfc5036 PUBLIC "" "http://xml2rfc.tools.ietf.org/public/rfc/bibxml/reference.RFC.5036.xml">
<!ENTITY rfc5086 PUBLIC "" "http://xml2rfc.tools.ietf.org/public/rfc/bibxml/reference.RFC.5086.xml">
<!ENTITY rfc5087 PUBLIC "" "http://xml2rfc.tools.ietf.org/public/rfc/bibxml/reference.RFC.5087.xml">
<!ENTITY rfc5254 PUBLIC "" "http://xml2rfc.tools.ietf.org/public/rfc/bibxml/reference.RFC.5254.xml">
<!ENTITY rfc5129 PUBLIC "" "http://xml2rfc.tools.ietf.org/public/rfc/bibxml/reference.RFC.5129.xml">
<!ENTITY rfc5305 PUBLIC "" "http://xml2rfc.tools.ietf.org/public/rfc/bibxml/reference.RFC.5305.xml">
<!ENTITY rfc5331 PUBLIC "" "http://xml2rfc.tools.ietf.org/public/rfc/bibxml/reference.RFC.5331.xml">
<!ENTITY rfc5332 PUBLIC "" "http://xml2rfc.tools.ietf.org/public/rfc/bibxml/reference.RFC.5332.xml">
<!ENTITY rfc5440 PUBLIC "" "http://xml2rfc.tools.ietf.org/public/rfc/bibxml/reference.RFC.5440.xml">
<!ENTITY rfc5462 PUBLIC "" "http://xml2rfc.tools.ietf.org/public/rfc/bibxml/reference.RFC.5462.xml">
<!ENTITY rfc5586 PUBLIC "" "http://xml2rfc.tools.ietf.org/public/rfc/bibxml/reference.RFC.5586.xml">
<!ENTITY rfc5659 PUBLIC "" "http://xml2rfc.tools.ietf.org/public/rfc/bibxml/reference.RFC.5659.xml">
<!ENTITY rfc5085 PUBLIC "" "http://xml2rfc.tools.ietf.org/public/rfc/bibxml/reference.RFC.5085.xml">
<!ENTITY rfc5921 PUBLIC "" "http://xml2rfc.tools.ietf.org/public/rfc/bibxml/reference.RFC.5921.xml">
<!ENTITY rfc5960 PUBLIC "" "http://xml2rfc.tools.ietf.org/public/rfc/bibxml/reference.RFC.5960.xml">
<!ENTITY rfc6275 PUBLIC "" "http://xml2rfc.tools.ietf.org/public/rfc/bibxml/reference.RFC.6275.xml">
<!ENTITY rfc6371 PUBLIC "" "http://xml2rfc.tools.ietf.org/public/rfc/bibxml/reference.RFC.6371.xml">
<!ENTITY rfc6378 PUBLIC "" "http://xml2rfc.tools.ietf.org/public/rfc/bibxml/reference.RFC.6378.xml">
<!ENTITY rfc6387 PUBLIC "" "http://xml2rfc.tools.ietf.org/public/rfc/bibxml/reference.RFC.6387.xml">
<!ENTITY rfc6426 PUBLIC "" "http://xml2rfc.tools.ietf.org/public/rfc/bibxml/reference.RFC.6426.xml">
<!ENTITY rfc6437 PUBLIC "" "http://xml2rfc.tools.ietf.org/public/rfc/bibxml/reference.RFC.6437.xml">
<!ENTITY rfc6540 PUBLIC "" "http://xml2rfc.tools.ietf.org/public/rfc/bibxml/reference.RFC.6540.xml">
<!ENTITY rfc6564 PUBLIC "" "http://xml2rfc.tools.ietf.org/public/rfc/bibxml/reference.RFC.6564.xml">
<!ENTITY rfc6621 PUBLIC "" "http://xml2rfc.tools.ietf.org/public/rfc/bibxml/reference.RFC.6621.xml">
<!ENTITY rfc6658 PUBLIC "" "http://xml2rfc.tools.ietf.org/public/rfc/bibxml/reference.RFC.6658.xml">
<!ENTITY rfc6718 PUBLIC "" "http://xml2rfc.tools.ietf.org/public/rfc/bibxml/reference.RFC.6718.xml">
<!ENTITY rfc6733 PUBLIC "" "http://xml2rfc.tools.ietf.org/public/rfc/bibxml/reference.RFC.6733.xml">
<!ENTITY rfc6790 PUBLIC "" "http://xml2rfc.tools.ietf.org/public/rfc/bibxml/reference.RFC.6790.xml">
<!ENTITY rfc7271 PUBLIC "" "http://xml2rfc.tools.ietf.org/public/rfc/bibxml/reference.RFC.7271.xml">
<!ENTITY rfc7348 PUBLIC "" "http://xml2rfc.tools.ietf.org/public/rfc/bibxml/reference.RFC.7348.xml">
<!ENTITY rfc7426 PUBLIC "" "http://xml2rfc.tools.ietf.org/public/rfc/bibxml/reference.RFC.7426.xml">
<!ENTITY rfc7432 PUBLIC "" "http://xml2rfc.tools.ietf.org/public/rfc/bibxml/reference.RFC.7432.xml">
<!ENTITY rfc7510 PUBLIC "" "http://xml2rfc.tools.ietf.org/public/rfc/bibxml/reference.RFC.7510.xml">
<!ENTITY rfc8169 PUBLIC "" "http://xml2rfc.tools.ietf.org/public/rfc/bibxml/reference.RFC.8169.xml">
<!ENTITY I-D.ietf-pce-pcep-extension-for-pce-controller PUBLIC "" "http://xml.resource.org/public/rfc/bibxml3/reference.I-D.ietf-pce-pcep-extension-for-pce-controller.xml">
<!ENTITY I-D.ietf-spring-segment-routing-mpls PUBLIC "" "http://xml.resource.org/public/rfc/bibxml3/reference.I-D.ietf-spring-segment-routing-mpls">
<!ENTITY I-D.ietf-detnet-problem-statement PUBLIC "" "http://xml.resource.org/public/rfc/bibxml3/reference.I-D.ietf-detnet-problem-statement.xml">
<!ENTITY I-D.ietf-detnet-architecture PUBLIC "" "http://xml.resource.org/public/rfc/bibxml3/reference.I-D.ietf-detnet-architecture.xml">
<!ENTITY I-D.ietf-detnet-flow-information-model PUBLIC "" "http://xml.resource.org/public/rfc/bibxml3/reference.I-D.ietf-detnet-flow-information-model.xml">
<!ENTITY I-D.ietf-mpls-residence-time SYSTEM "http://xml.resource.org/public/rfc/bibxml3/reference.I-D.ietf-mpls-residence-time">

]>

<?xml-stylesheet type='text/xsl' href='rfc2629.xslt' ?>
<?rfc toc="yes"?>
<?rfc symrefs="yes"?>
<?rfc sortrefs="yes"?>
<?rfc iprnotified="no"?>
<?rfc strict="yes"?>
<?rfc compact="yes"?>
<?rfc subcompact="no"?>
<rfc category="info"
     docName="draft-ietf-detnet-data-plane-framework-00"
     ipr="trust200902"
     submissionType="IETF">
  <front>
    <title abbrev="DetNet Data Plane Framework">
    DetNet Data Plane Framework</title>

    <author role="editor" fullname="Bal&aacute;zs Varga" initials="B." surname="Varga">
      <organization>Ericsson</organization>
      <address>
        <postal>
          <street>Magyar Tudosok krt. 11.</street>
          <city>Budapest</city>
          <country>Hungary</country>
          <code>1117</code>
        </postal>
        <email>balazs.a.varga@ericsson.com</email>
      </address>
    </author>

    <author fullname="J&aacute;nos Farkas" initials="J." surname="Farkas">
      <organization>Ericsson</organization>
      <address>
        <postal>
          <street>Magyar Tudosok krt. 11.</street>
          <city>Budapest</city>
          <country>Hungary</country>
          <code>1117</code>
        </postal>
        <email>janos.farkas@ericsson.com</email>
      </address>
    </author>

    <author fullname="Lou Berger" initials="L." surname="Berger">
      <organization>LabN Consulting, L.L.C.</organization>
      <address>
        <email>lberger@labn.net</email>
      </address>
    </author>

    <author fullname="Andrew G. Malis" initials="A.G." surname="Malis">
      <organization>Huawei Technologies</organization>
      <address>
        <email>agmalis@gmail.com</email>
      </address>
    </author>

    <author fullname="Stewart Bryant" initials="S." surname="Bryant">
      <organization>Huawei Technologies</organization>
      <address>
        <email>stewart.bryant@gmail.com</email>
      </address>
    </author>

    <author fullname="Jouni Korhonen" initials="J." surname="Korhonen">
      <!--organization abbrev="Nordic">Nordic Semiconductor</organization-->
      <address>
        <email>jouni.nospam@gmail.com</email>
      </address>
    </author>

    <!--author fullname="Donald Fauntleroy Duck" initials="D. F." surname="Duck">
        <organization abbrev="Royal Bros.">Royal Bros.</organization>
        <address>
        <postal>
        <street>13 Paradise Road</street>
        <city>Duckburg</city>
        <region>Calisota</region>
        <country>USA</country>
        </postal>
        </address>
        </author-->
    <date />
    <workgroup>DetNet</workgroup>

    <abstract>
      <t>
        This document provides an overall framework for the Deterministic
        Networking data plane.  It covers concepts and considerations that
        are generally common to any Deterministic Networking data plane
        specification.
      </t>
    </abstract>
  </front>

  <middle>
    <section title="Introduction" anchor="sec_intro">

      <t>
        Deterministic Networking (DetNet) is a service that can be offered
        by a network to DetNet flows.  DetNet provides these flows with a
        low packet loss rates and assured maximum end-to-end delivery
        latency.  General background and concepts of DetNet can be found in
        <xref target="I-D.ietf-detnet-architecture"/>.
      </t>
      <t>
        The DetNet Architecture decomposes the DetNet related data plane
        functions into two sub-layers: a service sub-layer and a forwarding
        sub-layer.  The service sub-layer is used to provide DetNet service
        protection and reordering. The forwarding sub-layer is used to
        provides congestion protection (low loss, assured latency, and
        limited reordering) leveraging MPLS Traffic Engineering mechanisms.
      </t>
      <t>
        This document provides concepts any DetNet data plane specification
        and considerations for any corresponding implementation.

        It covers the building blocks that provides the DetNet service and
        forwarding sub-layer functions and flow identification as described
        in the DetNet Architecture.

        As part of the service sub-layer functions, this document describes
        typical DetNet node data plane operation. It describes the function
        and operation of the Packet Replication (PRF) Packet Elimination
        (PEF) and Packet Ordering (POF) functions within the service
        sub-layer.

        It also describes the forwarding sub-layer that is used to eliminate
        (or reduce) contention loss and provides bounded latency for DetNet
        flows.
      </t>
      <t>
        DetNet flows can be carried over network technologies that can
        provide the DetNet required level of service.  For example, DetNet
        MPLS flows can be carried over IEEE 802.1 Time Sensitive Network
        (TSN) sub-networks.
      </t>
      <t>
        Different traffic types, or application flows, can be mapped on top
        of DetNet.  DetNet can optionally reuse header information provided
        by, or shared with, applications. An example of such can be found in
        <xref target="I-D.ietf-detnet-ip"/>.  This document also covers
        concepts related to the controller plane and Operations,
        Administration, and Maintenance (OAM) functions.
      </t>

    </section>

    <section title="Terminology">
      <section title="Terms Used in This Document">
        <t>
          This document uses the terminology established in the DetNet
          architecture <xref target="I-D.ietf-detnet-architecture"/>,
          and the reader is assumed to be familiar with that document
          and its terminology.
        </t>
      </section>

      <section title="Abbreviations">
        <t>
          The following abbreviations are used in this document:
          <list style="hanging" hangIndent="14">
            <t hangText="AC">Attachment Circuit.</t>
            <t hangText="CE">Customer Edge equipment.</t>
            <t hangText="CoS">Class of Service.</t>
            <t hangText="CW">Control Word.</t>
            <t hangText="DetNet">Deterministic Networking.</t>
            <t hangText="DF">DetNet Flow.</t>
            <t hangText="DN-IWF">DetNet Inter-Working Function.</t>
            <t hangText="L2">Layer 2.</t>
            <t hangText="L2VPN">Layer 2 Virtual Private Network.</t>
            <t hangText="L3">Layer 3.</t>
            <t hangText="LSR">Label Switching Router.</t>
            <t hangText="MPLS">Multiprotocol Label Switching.</t>
            <t hangText="MPLS-TE">Multiprotocol Label Switching - Traffic Engineering.</t>
            <t hangText="MPLS-TP">Multiprotocol Label Switching - Transport Profile.</t>
            <t hangText="MS-PW">Multi-Segment PseudoWire (MS-PW).</t>
            <t hangText="NSP">Native Service Processing.</t>
            <t hangText="OAM">Operations, Administration, and Maintenance.</t>
            <t hangText="PE">Provider Edge.</t>
            <t hangText="PEF">Packet Elimination Function.</t>
            <t hangText="PRF">Packet Replication Function.</t>
            <t hangText="PREOF">Packet Replication, Elimination and Ordering Functions.</t>
            <t hangText="POF">Packet Ordering Function.</t>
            <t hangText="PSN">Packet Switched Network.</t>
            <t hangText="PW">PseudoWire.</t>
            <t hangText="QoS">Quality of Service.</t>
            <t hangText="S-PE">Switching Provider Edge.</t>
            <t hangText="T-PE">Terminating Provider Edge.</t>
            <t hangText="TSN">Time-Sensitive Network.</t>
          </list>
        </t>
      </section>
    </section>  <!-- end of terminology -->

    <section title="DetNet Data Plane Overview" anchor="sec_dt_dp">
      <section title="Layers of DetNet Data Plane" anchor="sec_lay_dt_dp">
        <t>
          This document describes how DetNet flows are carried over MPLS
          networks. The DetNet Architecture, <xref
          target="I-D.ietf-detnet-architecture"/>, decomposes the DetNet
          data plane into two sub-layers: a service sub-layer and a
          forwarding sub-layer.  The basic approach defined in this
          document supports the DetNet service sub-layer based on
          existing pseudowire (PW) encapsulations and mechanisms, and
          supports the DetNet forwarding sub-layer based on existing
          MPLS Traffic Engineering encapsulations and mechanisms.
          Background on PWs can be found in <xref target="RFC3985"/> and
          <xref target="RFC3031"/>. Background on MPLS Traffic
          Engineering can be found in <xref target="RFC3272"/> and <xref
          target="RFC3209"/>.
        </t>
        <figure anchor="dn_mpls_dp_approach" align="center"
                title="DetNet Adaptation to MPLS Data Plane">
          <artwork align="center"><![CDATA[
  DetNet        MPLS
    .
    .
+------------+
|  Service   | d-CW, S-Label
+------------+
| Forwarding | F-Label(s)
+------------+
    .
    .
    ]]></artwork>
        </figure>

        <t>
          The DetNet MPLS data plane approach defined in this document
          is shown in <xref target="dn_mpls_dp_approach"/>.  The service
          sub-layer is supported by a DetNet control word (d-CW) which
          conforms to the Generic PW MPLS Control Word (PWMCW) defined
          in <xref target="RFC4385"/>.  A d-CW identifying service label
          (S-Label) is also used.
        </t>

        <t>
          A node operating on a DetNet flow in the Detnet service
          sub-layer, i.e. a node processing a DetNet packet which has
          the S-Label as top of stack uses the local context associated
          with that S-Label, for example a received F-Label, to
          determine what local DetNet operation(s) are applied to that
          packet. An S-Label may be unique when taken from the platform
          label space <xref target="RFC3031"/>, which would enable
          correct DetNet flow identification regardless of which input
          interface or LSP the packet arrives on.
        </t>

        <t>
          The DetNet MPLS data plane builds on MPLS Traffic Engineering
          encapsulations and mechanisms to provide a forwarding
          sub-layer that is responsible for providing resource
          allocation and explicit routes.  The forwarding sub-layer is
          supported by one or more forwarding labels (F-Labels).
        </t>

      </section>

      <section title="DetNet Data Plane Scenarios"
               anchor="sec_mpls_dt_dp_scen">

        <t>
          [Editor's note: WE NEED NEW FIGURES HERE (see presentation
          slide 4 or slide 21 are good inputs) and pointers to the
          splitted documents].
        </t>

      </section>
    </section>  <!-- end of data plane overview -->



    <section title="DetNet IP Data Plane Overview" anchor="sec_dt_ip_dp">
      <!-- 
      -->

      <t>
        [Editor's note: To be merged with previous section].
      </t>

      <t>
        This document describes how IP is used by DetNet nodes, i.e.,
        hosts and routers, to identify DetNet flows and provide a DetNet
        service. From a data plane perspective, an end-to-end IP model
        is followed.  As mentioned above, existing IP and higher layer
        protocol header information is used to support flow
        identification and DetNet service delivery.
      </t>
      <t>
        DetNet uses "6-tuple" based flow identification, where "6-tuple"
        refers to information carried in IP and higher layer protocol
        headers. General background on the use of IP headers, and
        "5-tuples", to identify flows and support Quality of Service
        (QoS) can be found in <xref target="RFC3670"/>.  <xref
        target="RFC7657"/> also provides useful background on the
        delivery differentiated services (DiffServ) and "6-tuple" based
        flow identification.
      </t>
      <t>
        DetNet flow aggregation may be enabled via the use of
        wildcards, masks, prefixes and ranges. IP tunnels may also be
        used to support flow aggregation. In these cases, it is
        expected that DetNet aware intermediate nodes will provide
        DetNet service assurance on the aggregate through resource
        allocation and congestion control mechanisms.
      </t>
      <figure align="center" anchor="fig_ip_detnet_simple"
              title="A Simple DetNet (DN) Enabled IP Network">
        <artwork><![CDATA[
 DetNet IP       Relay                        Relay       DetNet IP
 End System      Node                         Node        End System

+----------+                                             +----------+
|   Appl.  |<------------ End to End Service ----------->|   Appl.  |
+----------+  ............                 ...........   +----------+
| Service  |<-: Service  :-- DetNet flow --: Service  :->| Service  |
+----------+  +----------+                 +----------+  +----------+
|Forwarding|  |Forwarding|                 |Forwarding|  |Forwarding|
+--------.-+  +-.------.-+                 +-.---.----+  +-------.--+
         : Link :       \      ,-----.      /     \   ,-----.   /
         +......+        +----[  Sub  ]----+       +-[  Sub  ]-+
                              [Network]              [Network]
                               `-----'                `-----'

         |<--------------------- DetNet IP --------------------->|
                         ]]></artwork>
      </figure>
      <t>
        <xref target="fig_ip_detnet_simple"/> illustrates a DetNet enabled IP
        network.  The DetNet enabled end systems originate IP encapsulated
        traffic that is identified as DetNet flows, relay nodes understand the
        forwarding requirements of the DetNet flow and ensure that node,
        interface and sub-network resources are allocated to ensure DetNet
        service requirements. The dotted line around the Service component of
        the Relay Nodes indicates that the transit routers are DetNet service
        aware but do not perform any DetNet service sub-layer function, e.g., PREOF.
        IEEE 802.1 TSN is an example sub-network type which can provide support
        for DetNet flows and service.  The mapping of DetNet IP flows to TSN
        streams and TSN protection mechanisms is covered in <!-- <xref
        target="mapping-tsn"/> -->.
      </t>
      <t>
        Note: The sub-network can represent a TSN, MPLS or IP network
        segment.
      </t>

      <figure align="center" anchor="fig_ip_detnet"
              title="DetNet IP Over DetNet MPLS Network">
        <artwork><![CDATA[
 DetNet IP       Relay         Transit         Relay       DetNet IP
 End System      Node           Node           Node        End System

+----------+                                              +----------+
|   Appl.  |<-------------- End to End Service ---------->|   Appl.  |
+----------+   .....-----+                  +-----.....   +----------+
| Service  |<--: Service |-- DetNet flow ---| Service :-->| Service  |
|          |   :         |<- DN MPLS flow ->|         :   |          |
+----------+   +---------+   +----------+   +---------+   +----------+
|Forwarding|   |Fwd| |Fwd|   |Forwarding|   |Fwd| |Fwd|   |Forwarding|
+--------.-+   +-.-+ +-.-+   +---.----.-+   +-.-+ +-.-+   +----.-----+
         :  Link :    /  ,-----.  \   :  Link :    /  ,-----.  \
         +.......+    +-[  Sub  ]-+   +.......+   +--[  Sub  ]--+
                        [Network]                    [Network]
                         `-----'                      `-----'

                       |<---- DetNet MPLS --->|
         |<--------------------- DetNet IP ------------------->|
                         ]]></artwork>
      </figure>
      <t>
        <xref target="fig_ip_detnet"/> illustrates a variant of <xref
        target="fig_ip_detnet_simple"/>, with an MPLS based DetNet
        network as a sub-network between the relay nodes.  It shows a
        more complex DetNet enabled IP network where an IP flow is
        mapped to one or more PWs and MPLS (TE) LSPs.  The end systems
        still originate IP encapsulated traffic that is identified as
        DetNet flows.  The relay nodes follow procedures defined in
        XXX <!-- <xref target="ip-over-mpls"/> --> to map each DetNet
        flow to MPLS LSPs. While not shown, relay nodes can provide
        service sub-layer functions such as PREOF using DetNet over MPLS,
        and this is indicated by the solid line for the MPLS
        facing portion of the Service component. Note that the Transit
        node is MPLS (TE) LSP aware and performs switching based on MPLS
        labels, and need not have any specific knowledge of the DetNet
        service or the corresponding DetNet flow identification. See
        XXX <!-- <xref target="ip-over-mpls"/> --> for details on the mapping of IP
        flows to MPLS, and <!-- <xref target="I-D.ietf-detnet-dp-sol-mpls"/> -->
        for general support of DetNet services using MPLS.
      </t>
      <figure align="center" anchor="fig_non_detnet_ip"
              title="Non-DetNet aware IP end systems with DetNet IP Domain">
        <artwork><![CDATA[
 IP              Edge                         Edge         IP
 End System      Node                         Node         End System

+----------+   +.........+                  +.........+   +----------+
|   Appl.  |<--:Svc Proxy:-- E2E Service ---:Svc Proxy:-->|   Appl.  |
+----------+   +.........+                  +.........+   +----------+
|    IP    |<--:IP : :Svc:----- IP flow ----:Svc: :IP :-->|    IP    |
+----------+   +---+ +---+                  +---+ +---+   +----------+
|Forwarding|   |Fwd| |Fwd|                  |Fwd| |Fwd|   |Forwarding|
+--------.-+   +-.-+ +-.-+                  +-.-+ +-.-+   +---.------+
         :  Link :      \       ,-----.      /     /  ,-----.  \
         +.......+       +-----[  Sub  ]----+     +--[  Sub  ]--+
                               [Network]             [Network]
                                `-----'               `-----'

      |<--- IP --->| |<------ DetNet IP ------->| |<--- IP --->|
                         ]]></artwork>
      </figure>
      <t>
        <xref target="fig_non_detnet_ip"/> illustrates another variant of <xref
        target="fig_ip_detnet_simple"/> where the end systems are not DetNet
        aware.  In this case, edge nodes sit at the boundary of the DetNet
        domain and provide DetNet service proxies for the end applications by
        initiating and terminating DetNet service for the application's IP
        flows.  The existing header information or an approach such as described
        in XXX <!-- <xref target="aggregation"/> --> can be used to support DetNet flow
        identification.
      </t>
      <t>
        Non-DetNet and DetNet IP packets are identical on the wire. From
        data plane perspective, the only difference is that there is
        flow-associated DetNet information on each DetNet node that
        defines the flow related characteristics and required forwarding
        behavior.  As shown above, edge nodes provide a Service Proxy
        function that "associates" one or more IP flows with the
        appropriate DetNet flow-specific information and ensures that
        the receives the proper traffic treatment within the domain.
      </t>
      <t>
        Note: The operation of IEEE802.1 TSN end systems over DetNet
        enabled IP networks is not described in this document.  While
        TSN flows could be encapsulated in IP packets by an IP End
        System or DetNet Edge Node in order to produce DetNet IP flows,
        the details of such are out of scope of this document.
      </t>

    </section>




<!-- ================================================================= -->
<!-- =================== General Encap considerations ================ -->
<!-- ================================================================= -->

<section title="DetNet MPLS Data Plane Considerations" anchor="dn-gen-encap-solution">

  <t>
    [Editor's note: Let's how it can be generalized for the framework document].
  </t>

  <t>
    This section provides informative considerations related to
    providing DetNet service to flows which are identified
    based on their header information. At a high level, the
    following are provided on a per flow basis:
    <list style="hanging">
      <t hangText="Eliminating contention loss and jitter reduction:">
        <vspace blankLines="1"/>
        Use of allocated resources (queuing, policing, shaping) to ensure
        that the congestion-related loss and latency/jitter requirements of
        a DetNet flow are met.
      </t>
      <t hangText="Explicit routes:">
        <vspace blankLines="1"/>
        Use of a specific path for a flow.  This limits
        misordering and bounds latency.
      </t>

      <t hangText="Service protection:">
        <vspace blankLines="1"/>
        Which in the case of this document primarily relates to
        replication and elimination. Changing the explicit path after a
        failure is detected in order to restore delivery of the required
        DetNet service characteristics is also possible. Path changes,
        even in the case of failure recovery, can lead to the out of
        order delivery of data.
      </t>
      <t hangText="Load sharing:">
        <vspace blankLines="1"/>
        Generally, distributing packets of the same DetNet flow over
        multiple paths is not recommended. Such load sharing,
        e.g., via ECMP or UCMP, impacts ordering and possibly jitter.
      </t>
      <t hangText="Troubleshooting:"> <vspace blankLines="1"/>
      For example, to support identification of misbehaving flows.
      </t>
      <t hangText="Recognize flow(s) for analytics:"><vspace blankLines="1"/>
      For example, increase counters.
      </t>
      <t hangText="Correlate events with flows:"><vspace blankLines="1"/>
      For example, unexpected loss.
      </t>
    </list>
  </t>

  <t>
  The DetNet data plane also allows for the aggregation of DetNet flows,
  e.g., via MPLS hierarchical LSPs, to improved scaling.  When DetNet
  flows are aggregated, transit nodes provide service to the aggregate
  and not on a per-DetNet flow basis.  In this case, nodes performing
  aggregation will ensure that per-flow service requirements are
  achieved.
 </t>

 <section title="End-System Specific Considerations">
  <t>
   Data-flows requiring DetNet service are generated and terminated on
   end-systems. Encapsulation depends on application and its
   preferences. In a DetNet MPLS domain the DN functions use the d-CWs,
   S-Labels and F-Labels to provide DetNet services. However, an
   application may exchange further flow related parameters (e.g.,
   time-stamp), which are not provided by DN functions.
  </t>

  <t>
    Specifics related to non-MPLS DetNet end station behavior are out
    side the scope of this document.  For example, details on support
    for DetNet IP data flows can be found in <xref
    target="I-D.ietf-detnet-ip"/>. This document is also useful
    for end stations that map IP flows to DetNet flows.
  </t>
  <t>
   As a general rule, DetNet MPLS domains are capable of forwarding any
   DetNet MPLS flows and the DetNet domain does not mandate the
   end-system or edge system encapsulation format. Unless there is a
   proxy of some form present, end-systems peer with similar end-systems
   using the same application encapsulation format.  For example, as
   shown in <xref target="fig_es_connect"/>, IP applications peer with
   IP applications and Ethernet L2VPN applications peer with Ethernet
   L2VPN applications.
  </t>

  <figure title="End-Systems and The DetNet MPLS Domain" anchor="fig_es_connect">
  <artwork align="center"><![CDATA[
+-----+
|  X  |                               +-----+
+-----+                               |  X  |
| Eth |               ________        +-----+
+-----+     _____    /        \       | Eth |
       \   /     \__/          \___   +-----+
        \ /                        \ /
         0======== tunnel-1 ========0_
         |                             \
          \                             |
          0========= tunnel-2 =========0
         / \                        __/ \
  +-----+   \__ DetNet MPLS domain /     \
  |  X  |      \         __       /       +-----+
  +-----+       \_______/  \_____/        |  X  |
  |  IP |                                 +-----+
  +-----+                                 |  IP |
                                          +-----+
  ]]>
    </artwork></figure>

 </section>
 <section title="Sub-Network Considerations">
   <t>
     As shown in <!-- <xref target="fig_dn_mpls_detnet"/> -->, MPLS nodes are
     interconnected by different sub-network technologies, which may
     include point-to-point links. Each of these need to provide
     appropriate service to DetNet flows.  In some cases, e.g., on
     dedicated point-to-point links or TDM technologies, all that is
     required is for a DetNet node to appropriately queue its output
     traffic.  In other cases, DetNet nodes will need to map DetNet
     flows to the flow semantics (i.e., identifiers) and mechanisms used
     by an underlying sub-network technology.  <xref
     target="fig_dn_mpls_sn_ex"/> shows several examples of header
     formats that can be used to carry DetNet MPLS flows over different
     sub-network technologies.  L2 represent a generic layer-2
     encapsulation that might be used on a point-to-point link.  TSN
     represents the encapsulation used on an IEEE 802.1 TSN network, as
     described in <!-- <xref target="mpls-over-tsn"/> -->.  UDP/IP represents the
     encapsulation used on a DetNet IP PSN, as described in <!-- <xref
     target="mpls-over-ip"/> -->.     
   </t>
   

  <figure title="Example DetNet MPLS Sub-Network Formats" anchor="fig_dn_mpls_sn_ex">
  <artwork align="center"><![CDATA[

                   +------+  +------+  +------+
App-Flow           |  X   |  |  X   |  |  X   |
             +-----+======+--+======+--+======+-----+
DetNet-MPLS        | d-CW |  | d-CW |  | d-CW |
                   +------+  +------+  +------+
                   |Labels|  |Labels|  |Labels|
             +-----+======+--+======+--+======+-----+
Sub-Network        |  L2  |  | TSN  |  | UDP  |
                   +------+  +------+  +------+
                                       |  IP  |
                                       +------+
                                       |  L2  |
                                       +------+
    ]]>
  </artwork></figure>
 </section>
</section>

<!-- ================================================================= -->

<section title="Controller Plane (Management and Control)
                Considerations" anchor="cp_considerations">

  <section title="Generic Controller Plane 
                  Considerations" anchor="gen_cp_considerations">
    <t>
      This section covers control plane considerations that are
      independent of the data plane technology used for DetNet service
      delivery. 
    </t>
    <t>
      While management plane and control planes are traditionally
      considered separately, from the Data Plane perspective there is no
      practical difference based on the origin of flow provisioning
      information, and the DetNet architecture <xref
      target="I-D.ietf-detnet-architecture"/> refers to these collectively
      as the 'Controller Plane'.  This document therefore does not
      distinguish between information provided by distributed control
      plane protocols, e.g., RSVP-TE <xref target="RFC3209"/> and <xref
      target="RFC3473"/>, or by centralized network management mechanisms,
      e.g., RestConf <xref target="RFC8040"/>, YANG <xref
      target="RFC7950"/>, and the Path Computation Element Communication
      Protocol (PCEP) <xref
      target="I-D.ietf-pce-pcep-extension-for-pce-controller"/> or any
      combination thereof. Specific considerations and requirements for
      the DetNet Controller Plane are discussed in <xref
      target="control-management-requirements"/>.
    </t>

  </section>
  <section title="IP-Specific Controller Plane 
                  Considerations" anchor="ip_cp_considerations">
    <t>
      This section covers IP data plane specific control plane considerations.
    </t>
    <section title="Flow Identification and Aggregation">
      <t>
        <xref target="sec_dt_dp"/> introduces the use of the IP
        "6-tuple" for flow identification, and <!-- <xref target="QoS"/> -->
        goes on to discuss how identified flows use specific QoS
        mechanisms for flow-specific traffic treatment, including path
        control and resource allocation. XXX <!-- <xref target="ip-flow-id"/> -->
        contains detailed DetNet IP flow identification
        procedures. Flow identification will play an important role
        for the DetNet controller plane.
      </t>
      <t>
        XXX and YYY <!-- <xref target="aggregation"/> and <xref target="ip-agg"/> -->
        discuss the use of flow aggregation in DetNet. Flow
        aggregation can be accomplished using any of the 6-tuple
        fields defined in XXX <!-- <xref target="ip-flow-id"/> -->, using a DSCP
        identified traffic class or other field. It will be the
        responsibility of the DetNet controller plane to be able to
        properly provision the use of these aggregation
        mechanisms. These requirements are included in <xref
        target="control-management-requirements"/>.
      </t>
    </section>
    <section title="Explcit Routes">
      <t>
        Explicit routes are used to ensure that packets are routed
        through the resources that have been reserved for them, and
        hence provide the DetNet application with the required
        service. A requirement for the DetNet Controller Plane will be
        the ability to assign a particular identified DetNet IP flow
        to a path through the DetNet domain that has been assigned the
        required nodal resources to provide the appropriate traffic
        treatment for the flow, and also to include particular links
        as a part of the path that are able to support the DetNet
        flow, for example by using IEEE 802.1 TSN links (as discussed
        in XXX <!-- <xref target="mapping-tsn"/> -->). Further considerations and
        requirements for the DetNet Controller Plane are discussed in
        <xref target="control-management-requirements"/>.
      </t>
      <t>
        Whether configuring, calculating and instantiating these
        routes is a single-stage or multi-stage process, or in a
        centralized or distributed manner, is out of scope of this
        document.
      </t>
      <t>
        There are several of approaches that could be used to provide
        explicit routes and resource allocation in the DetNet
        layer. For example:
        <list style="symbols">
          <t>
            The path could be explicitly set up by a controller which
            calculates the path and explicitly configures each node
            along that path with the appropriate forwarding and
            resource allocation information.
          </t>
          <t>
            The path could be used a distributed control plane such as
            <xref target="RFC2205">RSVP</xref> or RSVP-TE <xref
            target="RFC3473"/> extended to support DetNet IP flows.
          </t>
          <t>
            The path could be implemented using IPv6-based segment
            routing when extended to support resource allocation.
          </t>
        </list>
        See <xref target="control-management-requirements"/> for
        further discussion of these alternatives. In addition, <xref
        target="RFC2386"/> contains useful background information on
        QoS-based routing, and <xref target="RFC5575"/> discusses a
        specific mechanism used by BGP for traffic flow specification
        and policy-based routing.
      </t>
    </section>
    <section title="Contention Loss and Jitter Reduction">
      <t>
        As discussed in <xref target="sec_intro"/>, this document does
        not specify the mechanisms needed to eliminate contention loss
        or reduce jitter for DetNet flows at the DetNet forwarding
        sub-layer.  The ability to manage node and link resources to
        be able to provide these functions will be a necessary part of
        the DetNet controller plane. It will also be necessary to be
        able to control the required queuing mechanisms used to
        provide these functions along a flow's path through the
        network. See XXX <!-- <xref target="ip-svc"/> --> and <xref
        target="control-management-requirements"/> for further
        discussion of these requirements.
      </t>
    </section>
    <section title="Bidirectional Traffic">
      <t>
        Some DetNet applications generate bidirectional traffic.
        Although this document discusses the DetNet IP data plane,
        MPLS definitions <xref target="RFC5654"/> are useful to
        illustrate terms such as associated bidirectional flows and
        co-routed bidirectional flows.  MPLS defines a point-to-point
        associated bidirectional LSP as consisting of two
        unidirectional point-to-point LSPs, one from A to B and the
        other from B to A, which are regarded as providing a single
        logical bidirectional forwarding path.  This is analogous to
        standard IP routing.  MPLS defines a point-to-point co-routed
        bidirectional LSP as an associated bidirectional LSP which
        satisfies the additional constraint that its two
        unidirectional component LSPs follow the same path (in terms
        of both nodes and links) in both directions.  An important
        property of co-routed bidirectional LSPs is that their
        unidirectional component LSPs share fate.  In both types of
        bidirectional LSPs, resource reservations may differ in each
        direction.  The concepts of associated bidirectional flows and
        co-routed bidirectional flows can also be applied to DetNet IP
        flows.
      </t>
      <t>
        While the DetNet IP data plane must support bidirectional
        DetNet flows, there are no special bidirectional features with
        respect to the data plane other than the need for the two
        directions of a co-routed bidirectional flow to take the same
        path. That is to say that bidirectional DetNet flows are
        solely represented at the management and control plane levels,
        without specific support or knowledge within the DetNet data
        plane.  Fate sharing and associated vs. co-routed
        bidirectional flows can be managed at the control level.
      </t>
      <t>
        Control and management mechanisms will need to support
        bidirectional flows, but the specification of such mechanisms
        are out of scope of this document. An example control plane
        solution for MPLS can be found in <xref target="RFC7551"/>.
      </t>
      <t>
        This is further discussed in <xref
        target="control-management-requirements"/>.
      </t>
    </section>
    <section anchor="control-management-requirements"
             title="DetNet Controller (Control and Management) Plane Requirements">
      <t>
        While the definition of controller plane for DetNet is out of
        the scope of this document, there are particular
        considerations and requirements for such that result from the
        unique characteristics of the DetNet architecture <xref
        target="I-D.ietf-detnet-architecture"/> and data plane as
        defined herein.
      </t>
      <t>
        The primary requirements of the DetNet controller plane are
        that it must be able to:
        <list style="symbols">
          <t>
            Instantiate DetNet flows in a DetNet domain (which may
            include some or all of explicit path determination, link
            bandwidth reservations, restricting flows to IEEE 802.1 TSN
            links, node buffer and other resource reservations,
            specification of required queuing disciplines along the
            path, ability to manage bidirectional flows, etc.) as needed
            for a flow.
          </t>
          <t>
            The ability to support DetNet flow aggregation
          </t>
          <t>
            Advertise static and dynamic node and link resources such
            as capabilities and adjacencies to other network nodes (for
            dynamic signaling approaches) or to network controllers (for
            centralized approaches)
          </t>
          <t>
            Scale to handle the number of DetNet flows expected in a
            domain (which may require per-flow signaling or
            provisioning)
          </t>
          <t>
            Provision flow identification information at each of the
            nodes along the path, and it may differ depending on the
            location in the network and the DetNet functionality.
          </t>
        </list>
      </t>
      <t>
        These requirements, as stated earlier, could be satisfied
        using distributed control protocol signaling, centralized
        network management provisioning mechanisms, or hybrid
        combinations of the two, and could also make use of IPv6-based
        segment routing.
      </t>
      <t>
        In the abstract, the results of either distributed signaling
        or centralized provisioning are equivalent from a DetNet data
        plane perspective - flows are instantiated, explicit routes
        are determined, resources are reserved, and packets are
        forwarded through the domain using the IP data plane.
      </t>
      <t>
        However, from a practical and implementation standpoint, they
        are not equivalent at all. Some approaches are more scalable
        than others in terms of signaling load on the network. Some
        can take advantage of global tracking of resources in the
        DetNet domain for better overall network resource
        optimization. Some are more resilient than others if link,
        node, or management equipment failures occur. While a detailed
        analysis of the control plane alternatives is out of the scope
        of this document, the requirements from this document can be
        used as the basis of a later analysis of the alternatives.
      </t>
    </section>
  </section>
  <section title="MPLS-Specific Controller Plane 
                  Considerations" anchor="mpls_cp_considerations">
    <t>
      This section covers MPLS data plane specific control plane considerations.
    </t>
    <section title="S-Label and F-Label Assignment and Distribution">
      <t>
        [Editor's note - we may need additional text on resource
        allocation in this section.]
      </t>
      <t>
        DetNet S-Labels (see XXX <!-- <xref target="flow-identification"/> --> for their
        definition) are similar to other MPLS service labels that denote the
        contents of the MPLS packet payload such as a layer 2 pseudowire, an
        IP packet that is routed in a VPN context with a private address, or
        an Ethernet virtual private network (EVPN) service.
      </t>
      <t>
        S-Labels are expected to be allocated in the same manner as any
        other service labels. S-Labels uniquely identify a particular
        DetNet flow, and are local to the node on which the label is
        allocated. In the DetNet service sub-layer the explicit route
        consists of the set of Relay Nodes that the DetNet flow must
        traverse.  They can be used to identify the DetNet flow that a
        packet belongs to as it traverses a particular node in a DetNet
        domain. Because labels are local to each node rather than being a
        global identifier within a domain, they must be advertised to their
        upstream DetNet service-aware peer nodes (e.g., a DetNet MPLS End
        System as shown in XXX <!-- <xref target="fig_pw_detnet"/> -->, or a DetNet
        Relay or Edge Node as shown in XXX <!-- <xref target="fig_pw_detnet2"/>-->) and
        interpreted in the context of their received F-Label.
      </t>
      <t>
        As discussed in <xref target="sec_dt_dp"/>, the forwarding sub-layer
        uses one or more F-Labels to forward DetNet packets between
        DetNet service-aware nodes along explicitly defined routes at the
        DetNet forwarding sub-layer, which in the context of this document is
        the MPLS layer.  F-Labels can also provide context for an S-Label.
        In the DetNet Forwarding (MPLS) sub-layer the explicit
        route consists of the set of DetNet nodes which are LSRs, links,
        and possibly link bundle members and queues that the DetNet packets
        of a flow must traverse between nodes in the DetNet service sub-layer
        (i.e. between a specific Edge Node and the next hop Relay Node,
        between specific Relay Nodes, and between a specific Relay node and
        the egress Edge Node. Resource allocation corresponding to the set
        of Services supported over the forwarding sub-layer, which may or may
        not include aggregation, is required at this sub-layer. Explicit
        routes are used to ensure that packets are routed through the
        resources that have been reserved for them, and hence provide the
        DetNet application with the required service.  Multiple F-Labels
        may be pushed after an S-Label and there is no requirement for all
        F-Labels to be controlled via the same controller mechanisms. For
        example in EVPN, some labels are distributed using BGP while others
        are distributed using LDP or RSVP. 
      </t>
      <t>
        Whether configuring, calculating and instantiating these routes is a
        single-stage or multi-stage process, or in a centralized or
        distributed manner, is out of scope of this document.
      </t>
      <t>
        There are a number of approaches that could be used to provide
        explicit routes and resource allocation in the MPLS layer:
        <list style="symbols">
          <t>
            The path could be explicitly set up by a controller which
            calculates the path and
            explicitly configures each node along that path with the
            appropriate forwarding and resource allocation information.
          </t>
          <t>
            The path could be set up using RSVP-TE signaling.
          </t>
          <t>
            The path could be implemented using
            MPLS-based segment routing when extended to support resource
            allocation.
          </t>
        </list>
        See <xref target="mpls-control-management-requirements"/> for further discussion of these alternatives.
      </t>
      <t>
        Much like other MPLS labels, there are a number of alternatives
        available for DetNet S-Label and F-Label advertisement to an
        upstream peer node. These include distributed signaling
        protocols such as RSVP-TE, centralized label distribution via a
        controller that manages both the sender and the receiver using
        NETCONF/YANG, BGP, PCEP, etc., and hybrid combinations of the
        two.  The details of the controller plane solution required for
        the label distribution and the management of the label number
        space are out of scope of this document, but as mentioned above,
        there are particular DetNet considerations and requirements that
        are discussed in <xref
        target="mpls-control-management-requirements"/>.
      </t>
    </section>
    <section title="Packet Replication, Elimination, and Ordering (PREOF)">
      <t>
        The controller plane protocol solution required for managing the
        PREOF processing is outside the scope of this document. That
        said, it should be noted that the ability to determine, for a
        particular flow, optimal packet replication and elimination
        points in the DetNet domain requires explicit support. There are
        be capabilities that can be used, or extended, for example GMPLS
        end-to-end recovery <xref target="RFC4872"/> and GMPLS segment
        recovery <xref target="RFC4873"/>.
      </t>
    </section>
    <section title="Contention Loss and Jitter Reduction">
      <t>
        As discussed in <xref target="sec_intro"/>, this document does
        not specify the mechanisms needed to eliminate contention loss or
        reduce jitter for DetNet flows at the DetNet forwarding sub-layer.
        The ability to manage node and link resources to be able to
        provide these functions will be a necessary part of the DetNet
        controller plane. It will also be necessary to be able to control
        the required queuing mechanisms used to provide these functions
        along a flow's path through the network. See <xref
        target="mpls-control-management-requirements"/> for further discussion
        of these requirements.
      </t>
    </section>
    <section title="Bidirectional Traffic">
      <t>
        Some DetNet applications generate bidirectional traffic.  Using MPLS
        definitions <xref target="RFC5654"/> there are associated
        bidirectional flows, and co-routed bidirectional flows.  MPLS
        defines a point-to-point associated bidirectional LSP as consisting
        of two unidirectional point-to-point LSPs, one from A to B and the
        other from B to A, which are regarded as providing a single logical
        bidirectional forwarding path.  This would be analogous of standard
        IP routing, or PWs running over two reciprocal unidirection LSPs.
        MPLS defines a point-to-point co-routed bidirectional LSP as an
        associated bidirectional LSP which satisfies the additional
        constraint that its two unidirectional component LSPs follow the
        same path (in terms of both nodes and links) in both directions.  An
        important property of co-routed bidirectional LSPs is that their
        unidirectional component LSPs share fate.  In both types of
        bidirectional LSPs, resource reservations may differ in each
        direction.  The concepts of associated bidirectional flows and
        co-routed bidirectional flows can be applied to DetNet flows.
      </t>
      <t>
        While the MPLS data plane must support bidirectional DetNet flows,
        there are no special bidirectional features with respect to the data
        plane other than the need for the two directions of a co-routed
        bidirectional flow to take the same path.  Fate sharing and
        associated vs co-routed bidirectional flows can be managed at the
        control level.  Note that there is no stated requirement for
        bidirectional DetNet flows to be supported using the same MPLS
        Labels in each direction.
      </t>
      <t>
        DetNet's use of PREOF may increase the complexity of using
        co-routing bidirectional flows, since if PREOF is used, then the
        replication points in one direction would have to match the
        elimination points in the other direction, and vice versa, and the
        optimal points for these functions in one direction may not match
        the optimal points in the other.
      </t>
      <t>
        Control and management mechanisms will need to support bidirectional
        flows, but the specification of such mechanisms are out of scope of
        this document. Related control plan mechanisms have been defined in
        <xref target="RFC3473"/>, <xref target="RFC6387"/> and <xref
        target="RFC7551"/>.
      </t>
      <t>
        This is further discussed in <xref target="mpls-control-management-requirements"/>.
      </t>
    </section>
    <section title="Flow Aggregation Control">
      <t>
        XXX <!-- <xref target="FAG"/> --> discusses the use of flow aggregation in
        DetNet. It includes flow aggregation accomplished through the use
        of hierarchical LSPs, aggregating multiple DetNet flows into a
        single new DetNet flow, and simple aggregation at the DetNet
        layer. It will be the responsibility of the DetNet controller
        plane to be able to properly provision the use of these
        mechanisms. These requirements are included in the next section.
      </t>
    </section>
    <section anchor="mpls-control-management-requirements" title="DetNet
                                                             Controller (Control and Management) Plane Requirements">
      <t>
        While the definition of controller plane for DetNet is out of
        the scope of this document, there are particular considerations
        and requirements for such that result from the unique
        characteristics of the DetNet architecture <xref
        target="I-D.ietf-detnet-architecture"/> and data plane as
        defined herein.
      </t>
      <t>
        The primary requirements of the DetNet controller plane are
        that it must be able to:
        <list style="symbols">
          <t>Instantiate DetNet flows in a DetNet domain (which may include
          some or all of explicit path and PREOF replication and
          elimination node determination, link bandwidth reservations, node
          buffer anad other resource reservations, specification of
          required queuing disciplines along the path, ability to manage
          bidirectional flows, etc.) as needed for a flow.</t>
          <t>Manage DetNet S-Label and F-Label allocation and distribution,
          when the DetNet MPLS encapsulation is in use</t>
          <t>The ability to support DetNet flow aggregation</t>
          <t>Advertise static and dynamic node and link resources such as
          capabilities and adjacencies to other network nodes (for dynamic
          signaling approaches) or to network controllers (for centralized
          approaches)</t>
          <t>Scale to handle the number of DetNet flows expected in a
          domain (which may require per-flow signaling or provisioning)</t>
          <t>Provision flow identification information at each of the nodes
          along the path, and it may differ depending on the location in
          the network and the DetNet functionality (e.g. transit node
          vs. relay node).</t>
      </list> </t>
      <t>
        These requirements, as stated earlier, could be satisfied using
        distributed control protocol signaling (such as RSVP-TE),
        centralized network management provisioning mechanisms (such as
        BGP, PCEP, YANG <xref
        target="I-D.ietf-detnet-flow-information-model"/>, etc.) or hybrid
        combinations of the two, and could also make use of MPLS-based
        segment routing.
      </t>
      <t>
        In the abstract, the results of either distributed signaling or
        centralized provisioning are equivalent from a DetNet data plane
        perspective - flows are instantiated, explicit routes are
        determined, resources are reserved, and packets are forwarded
        through the domain using the MPLS data plane.
      </t>
      <t>
        However, from a practical and implementation standpoint, they are
        not equivalent at all. Some approaches are more scalable than
        others in terms of signaling load on the network. Some can take
        advantage of global tracking of resources in the DetNet domain for
        better overall network resource optimization. Some are more
        resilient than others if link, node, or management equipment
        failures occur. While a detailed analysis of the control plane
        alternatives is out of the scope of this document, the requirements
        from this document can be used as the basis of a later analysis of
        the alternatives.
      </t>
    </section>
  </section>
</section>

    <!-- ===================================================================== -->



<section title="Security Considerations">
  <t>
   The security considerations of DetNet in general are discussed in
   <xref target="I-D.ietf-detnet-architecture"/>
   and <xref target="I-D.sdt-detnet-security"/>. Other security
   considerations will be added in a future version of
   this draft.
  </t>
</section>


<section anchor="iana" title="IANA Considerations">
  <t>
   This document makes no IANA requests.
  </t>
</section>

<section anchor="Contributors" title="Contributors">
  <t>
    RFC7322 limits the number of authors listed on the front page of a
    draft to a maximum of 5, far fewer than the many individuals below
    who made important contributions to this draft. The editor wishes to
    thank and acknowledge each of the following authors for contributing
    text to this draft. See also <xref target="acks"/>.
 </t>
 <figure> <artwork><![CDATA[
   Loa Andersson
   Huawei
   Email: loa@pi.nu

   Yuanlong Jiang
   Huawei
   Email: jiangyuanlong@huawei.com

   Norman Finn
   Huawei
   3101 Rio Way
   Spring Valley, CA  91977
   USA
   Email: norman.finn@mail01.huawei.com

   Janos Farkas
   Ericsson
   Magyar Tudosok krt. 11.
   Budapest  1117
   Hungary
   Email: janos.farkas@ericsson.com

   Carlos J. Bernardos
   Universidad Carlos III de Madrid
   Av. Universidad, 30
   Leganes, Madrid  28911
   Spain
   Email: cjbc@it.uc3m.es

   Tal Mizrahi
   Marvell
   6 Hamada st.
   Yokneam
   Israel
   Email: talmi@marvell.com

   Lou Berger
   LabN Consulting, L.L.C.
   Email: lberger@labn.net

   Stewart Bryant
   Huawei Technologies
   Email: stewart.bryant@gmail.com

   Mach Chen
   Huawei Technologies
   Email: mach.chen@huawei.com

   Andrew G. Malis
   Huawei Technologies
   Email: agmalis@gmail.com
   ]]></artwork>
 </figure>

</section>


<section anchor="acks" title="Acknowledgements">
  <t>The author(s) ACK and NACK.
  </t>
  <t> The following people were part of the DetNet Data Plane Solution Design Team:
  <list style="bullets">
   <t>Jouni Korhonen</t>
   <t>J&aacute;nos Farkas</t>
   <t>Norman Finn</t>
   <t>Bal&aacute;zs Varga</t>
   <t>Loa Andersson</t>
   <t>Tal Mizrahi</t>
   <t>David Mozes</t>
   <t>Yuanlong Jiang</t>
   <t>Andrew Malis</t>
   <t>Carlos J. Bernardos</t>
  </list></t>
  <t>
   The DetNet chairs serving during the DetNet Data Plane Solution Design Team:
   <list style="bullets">
    <t>Lou Berger</t>
    <t>Pat Thaler</t>
   </list></t>
   <t>
    Thanks for Stewart Bryant for his extensive review of the previous
    versions of the document.
   </t>
</section>
</middle>

<back>
  <references title="Normative References">
   &rfc2119;
   <?rfc include="reference.RFC.2211"?>
   <?rfc include="reference.RFC.2212"?>
   <?rfc include="reference.RFC.3031"?>
   <?rfc include="reference.RFC.3032"?>
   <?rfc include="reference.RFC.3209"?>
   <?rfc include="reference.RFC.3270"?>
   <?rfc include="reference.RFC.3443"?>
   <?rfc include="reference.RFC.3473"?>
   <?rfc include="reference.RFC.4206"?>
   <?rfc include="reference.RFC.5129"?>
   <?rfc include="reference.RFC.5085"?>
   <?rfc include="reference.RFC.5462"?>
   &rfc4385;
   &rfc7510;
   <?rfc include="reference.RFC.8174"?>
  </references>
  <references title="Informative References">
   <?rfc include="reference.RFC.2205"?>
   <?rfc include="reference.RFC.2386"?>
   <?rfc include="reference.RFC.2474"?>
   <?rfc include="reference.RFC.3272"?>
   &rfc3985;
   &rfc4448;
   &rfc4872;
   &rfc4873;
      <?rfc include="reference.RFC.7657"?>
      <?rfc include="reference.RFC.3670"?>
   <?rfc include="reference.RFC.4875"?>
   <?rfc include="reference.RFC.5440"?>
   <?rfc include="reference.RFC.5575"?>
   <?rfc include="reference.RFC.5586"?>
   <?rfc include="reference.RFC.5654"?>
   <?rfc include="reference.RFC.5921"?>
   <?rfc include="reference.RFC.6073"?>
   <?rfc include="reference.RFC.6003"?>
   <?rfc include="reference.RFC.6006"?>
  &rfc6387;
    <?rfc include="reference.RFC.6790"?>
   <?rfc include="reference.RFC.7950"?>
   <?rfc include="reference.RFC.7551"?>
   <?rfc include="reference.RFC.8040"?>
   &I-D.ietf-pce-pcep-extension-for-pce-controller;
&I-D.ietf-detnet-architecture;
&I-D.ietf-detnet-flow-information-model;
   &I-D.ietf-spring-segment-routing-mpls;
   <reference anchor='I-D.ietf-detnet-ip'>
     <front>
       <title>DetNet IP Data Plane Encapsulation
       </title>
       <author>
         <organization>Korhonen, J., Varga, B.</organization>
       </author>
       <date year='2018' />
     </front>
   </reference>
   &rfc8169;

   <reference anchor='I-D.sdt-detnet-security'>
    <front>
     <title>Deterministic Networking (DetNet) Security Considerations,
		draft-sdt-detnet-security, work in progress
     </title>
     <author>
      <organization>Mizrahi, T., Grossman, E., Hacker, A., Das, S.</organization>
     </author>
     <date year='2017' />
    </front>
   </reference>

   <reference anchor='IEEE1588'>
     <front>
       <title>IEEE 1588 Standard for a Precision Clock Synchronization
       Protocol for Networked Measurement and Control Systems Version 2
       </title>
       <author>
         <organization>IEEE</organization>
       </author>
       <date year='2008' />
     </front>
   </reference>

   <reference anchor="IEEE8021Q"
     target="http://standards.ieee.org/about/get/">
    <front>
     <title>Standard for Local and metropolitan area networks--Bridges and Bridged Networks (IEEE Std 802.1Q-2014)</title>
     <author>
      <organization>IEEE 802.1</organization>
     </author>
     <date year="2014"/>
    </front>
    <format type="PDF" target="http://standards.ieee.org/about/get/"/>
   </reference>

   <reference anchor="IEEE8021CB"
    target="http://www.ieee802.org/1/files/private/cb-drafts/d2/802-1CB-d2-1.pdf">
    <front>
        <title>Draft Standard for Local and metropolitan area networks - Seamless Redundancy</title>
        <author initials="N. F." surname="Finn" fullname="Norman Finn">
            <organization>IEEE 802.1</organization>
        </author>
        <date month="December" year="2015"/>
    </front>
    <seriesInfo name="IEEE P802.1CB /D2.1" value="P802.1CB"/>
    <format type="PDF" target="http://www.ieee802.org/1/files/private/cb-drafts/d2/802-1CB-d2-1.pdf"/>
   </reference>

   <reference anchor="G.8275.1"
              target="https://www.itu.int/rec/T-REC-G.8275.1/en">
     <front>
       <title>Precision time protocol telecom profile for phase/time synchronization with full timing support from the network</title>
       <author>
         <organization>International Telecommunication Union</organization>
       </author>
       <date month="June" year="2016"/>
     </front>
     <seriesInfo name="ITU-T G.8275.1/Y.1369.1" value="G.8275.1"/>
   </reference>

   <reference anchor="G.8275.2"
              target="https://www.itu.int/rec/T-REC-G.8275.2/en">
     <front>
       <title>Precision time protocol telecom profile for phase/time synchronization with partial timing support from the network</title>
       <author>
         <organization>International Telecommunication Union</organization>
       </author>
       <date month="June" year="2016"/>
     </front>
     <seriesInfo name="ITU-T G.8275.2/Y.1369.2" value="G.8275.2"/>
   </reference>

  </references>

 </back>
</rfc>
